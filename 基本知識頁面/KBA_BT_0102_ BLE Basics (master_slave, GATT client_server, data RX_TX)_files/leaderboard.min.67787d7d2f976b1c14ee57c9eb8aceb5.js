(function(b){var c=b.View.extend({viewName:"DataTableView",setSortIcon:function(){},initializePagination:function(){},refreshView:function(a,b,l){this.render();var d=this,c=0,e=$(this.el).find("table").DataTable({dom:"rAtiJ",ordering:!1,serverSide:!0,deferLoading:a,displayStart:b,ajax:function(a,b,h){1===c&&l(d,a.start);c++},language:{search:"_INPUT_",searchPlaceholder:CQ.I18n.get("Filter"),emptyTable:CQ.I18n.get("No data available in table"),infoEmpty:CQ.I18n.get("No entries to show"),info:CQ.I18n.get("Showing")+
" _START_ "+CQ.I18n.get("to")+" _END_ "+CQ.I18n.get("of")+" _TOTAL_ "+CQ.I18n.get("entries")}});a=new $.fn.dataTable.ColVis(e,{fnStateChange:function(){var a=$.Event("dataTablesColumnUpdate");$(this.dom.wrapper).trigger(a);d.columnVisibility=[];e.columns().eq(0).each(function(a){a=e.column(a);d.columnVisibility.push(a.visible())})}});this.initializeSort();var g=0,k=0;_.each($(this.el).find(".dataTable thead th"),function(a){var b=!0;_.isUndefined(this.columnVisibility)||(b=this.columnVisibility[g]);
if($(a).hasClass("dt-hide")||!b)$($(this.el).find("table")[0]).dataTable().fnSetColumnVis(g,!1,!1),k===g&&k++;g++},this);$.fn.dataTable.ColVis.fnRebuild($($(this.el).find("table")[0]).dataTable());e.order([[k,"asc"]]).draw(!1);a.button().children[0].innerText=CQ.I18n.get("Show / hide columns");$(this.el).find(".dataTables_wrapper").prepend(a.button());a=$("\x3cdiv class\x3d'dataTables_toolbar'\x3e\x3c/div\x3e");$(a).append($(this.el).find(".ColVis"));$(a).append($(this.el).find(".dataTables_filter"));
$(this.el).find(".dataTables_wrapper").prepend(a);a=e.settings()[0];$(a.nTable).trigger("init.dt",[a])}});b.DataTableView=c})(SCF);
(function(b){b.LOG_LEVEL=1;var c=b.Model.extend({reportGenerated:!1,fetchNewReport:function(a){this.paginationUrl=a;this.reportGenerated=!1;this.clear();this.firstPage()},changePage:function(a){this.currentOffset=a;this.url=this.paginationUrl.replace("${startIndex}",a);var b=this;this.fetch({success:function(a,d){void 0!==d.items&&0<d.items.length&&b.set("model",d)}})},firstPage:function(){this.changePage(0)},nextPage:function(){var a=this.currentOffset+=this.pageSize;this.changePage(a)},previousPage:function(){var a=
this.currentOffset-=this.pageSize;this.changePage(a)},lastPage:function(){this.changePage(this.lastPageOffset)}});b.ReportPaginatedTableModel=c;c=b.View.extend({init:function(){b.Util.listenTo("reportValidatePaginationButtons",$.proxy(this.validate,this))},firstPage:function(){this.model.firstPage()},nextPage:function(){this.model.nextPage()},previousPage:function(){this.model.previousPage()},lastPage:function(){this.model.lastPage()},validate:function(a){if(a.model===this.model){var b=a=!1;0===this.model.currentOffset&&
(a=!0);this.model.currentOffset===this.model.lastPageOffset&&(b=!0);this.$el.find(".scf-pagination-first-btn").prop("disabled",a);this.$el.find(".scf-pagination-previous-btn").prop("disabled",a);this.$el.find(".scf-pagination-next-btn").prop("disabled",b);this.$el.find(".scf-pagination-last-btn").prop("disabled",b)}}});b.ReportPaginationControlView=c})(SCF);
(function(b){b.LOG_LEVEL=1;var c=b.DataTableView.extend({top:-1,viewName:"BootstrapReportPaginatedTableView",init:function(){this.listenTo(this.model,"sync",this.onSync);b.Util.listenTo("reportRefreshTable",$.proxy(this.refreshTable,this))},refreshTable:function(){var a=this.collection.size();0<a?(this.refreshView(a,this.model.currentOffset,this.pagingCallback),this.model.currentOffset=this.model.get("pageInfo").currentIndex,this.model.pageSize=this.model.get("pageInfo").pageSize,this.model.lastPageOffset=
this.model.pageSize*(this.model.get("pageInfo").totalPages-1),this.model.reportGenerated=!0,this.renderDueStatusLabels(),this.validatePaginationButtons()):this.render()},pagingCallback:function(a){a.model.firstPage()},renderDueStatusLabels:function(){},validatePaginationButtons:function(){b.Util.announce("reportValidatePaginationButtons",{model:this.model,currentOffset:this.model.currentOffset,lastPageOffset:this.model.lastPageOffset})},initializeSort:function(){}});b.BootstrapReportPaginatedTableView=
c;b.registerComponent("social/reporting/components/hbs/reporting/datatable/bootstrap/pagination",b.Model,b.ReportPaginationControlView)})(SCF);(function(b,c){c(b).ready(function(){var a=c(".scf-js-leaderboarditem-progression").data("thresholds");a&&(a=a[a.length-1],c(".scf-js-progress").attr("aria-valuemax",a))})})(document,$);
(function(b){var c=b.Model.extend({modelName:"LeaderboardModel",loadDataAsync:function(){this.url=this.get("pageInfo").urlpattern.replace(".html",".json").replace(".10","."+this.get("displayLimit")).replace("${startIndex}","0");var a=CQ.shared.HTTP.getPath(),b=CQ.shared.HTTP.getExtension(window.location.pathname),c=a.split(b);this.url+=b&&void 0!==b&&c&&void 0!==c?1<c.length?c[1]:c[0]:a;var f=this;this.fetch({success:function(a,b){!_.isUndefined(b.items)&&0<b.items.length&&f.set("model",b)}})}}),
a=b.BootstrapReportPaginatedTableView.extend({viewName:"LeaderboardView",className:"scf-leaderboard",init:function(){this.collection=this.model.get("items");b.BootstrapReportPaginatedTableView.prototype.init.apply(this);this.listenTo(this.model,"change:pageInfo",this.onPageInfoChange);this.model.loadDataAsync()},paginate:function(){var a=b.config.urlRoot+this.model.get("id")+b.constants.SOCIAL_SELECTOR+".",c=arguments[1],h=arguments[2],f=3>=arguments.length?null:arguments[3];this.model.url=3>=arguments.length?
a+c+"."+h+b.constants.JSON_EXT:a+"index."+c+"."+h+"."+(void 0!==f?f+".":"")+b.constants.JSON_EXT;this.model.reload()},navigate:function(a){var b=this.model.get("pageInfo");a=$(a.currentTarget).data("pageSuffix").toString().split(".");null!==b.selectedIndex?this.paginate(b.basePageURL,a[0],a[1],b.selectedIndex):this.paginate(b.basePageURL,a[0],a[1])}});b.LeaderboardModel=c;b.LeaderboardView=a;b.registerComponent("social/gamification/components/hbs/leaderboard",b.LeaderboardModel,b.LeaderboardView)})(SCF);